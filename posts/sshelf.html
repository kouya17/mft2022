<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="og:title" content="Cooking Timelapse Vlog"/><title>青木晃也 MFT2022 | SShelf</title><meta name="description" content="青木晃也 MFT2022用ページ"/><link rel="icon" href="/favicon.ico"/><meta property="og:title" content="青木晃也 MFT2022 | Home"/><meta property="og:description" content="青木晃也 MFT2022用ページ"/><meta name="twitter:card" content="summary"/><meta name="next-head-count" content="10"/><link rel="preload" href="/_next/static/css/9a0c2d676c7818f4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9a0c2d676c7818f4.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-3433a2a2d0cf6fb6.js" defer=""></script><script src="/_next/static/chunks/framework-db825bd0b4ae01ef.js" defer=""></script><script src="/_next/static/chunks/main-deb0f2829cc5b5f4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-deb173bd80cbaa92.js" defer=""></script><script src="/_next/static/chunks/996-b6a1a221048f5228.js" defer=""></script><script src="/_next/static/chunks/660-8a3011796939ffab.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-3294e8e12db61bae.js" defer=""></script><script src="/_next/static/1C703IJcvYnxWu0CGmYRD/_buildManifest.js" defer=""></script><script src="/_next/static/1C703IJcvYnxWu0CGmYRD/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="dark:bg-gray-800 dark:text-white"><nav class="bg-white border-b border-gray-200 dark:border-gray-600 px-2 py-2.5 dark:bg-gray-900 sticky top-0 z-50"><div class="container px-5 flex flex-wrap justify-between items-center mx-auto"><a class="flex items-center" href="/"><span class="self-center text-xl font-semibold whitespace-nowrap dark:text-white">TOP</span></a><div class="block w-auto"><ul class="flex border-gray-100 flex-row space-x-8 mt-0 text-sm font-medium border-0 dark:bg-gray-900"><li><a class="bg-blue-700 rounded bg-transparent text-blue-700 p-0 dark:text-white" href="/posts/hodai-system">HODAI</a></li><li><a class="bg-blue-700 rounded bg-transparent text-blue-700 p-0 dark:text-white" href="/posts/sshelf">SShelf</a></li></ul></div></div></nav><div class="container mx-auto px-4"><main><div class="flex justify-center"><article><div class="prose dark:prose-dark"><div class="line-numbers my-5"><div><h1>SShelf</h1>
<p>名前は Searchable Shelf を省略して SShelf 。初見でかなり読みずらいと思うが"エスシェルフ"と読むことにする。</p>
<h2>外観</h2>
<p><img src="/images/Honeyview_IMG_2613.jpg" alt="SShelf外観"></p>
<h2>機能概要</h2>
<ul>
<li>どの部品をどこの引き出しに入れたかブラウザから手作業で登録できる。</li>
<li>部品の在庫をブラウザから検索できる。</li>
<li>ブラウザから部品詳細ページを開くと、その部品が入っている引き出しのLEDが点滅する。</li>
<li>引き出しユニットを16個まで追加できる。</li>
</ul>
<h2>機能の詳細</h2>
<h3>引き出し登録</h3>
<p><img src="/images/add_shelf.png" alt="引き出し登録"></p>
<p>引き出し登録時は、以下をブラウザから入力する。</p>
<ul>
<li>引き出し名</li>
<li>接続ポート番号(接続するPCA9685のポート番号)</li>
<li>メモ</li>
</ul>
<h3>部品登録</h3>
<p><img src="/images/add_parts_c.png" alt="部品登録"></p>
<p>部品登録時は、以下をブラウザから入力する。</p>
<ul>
<li>通販コード(任意)</li>
<li>部品名</li>
<li>個数</li>
<li>収納場所(登録した引き出しから選ぶ)</li>
<li>メモ</li>
</ul>
<p>なお、秋月電子の購入履歴をコピペすると、上記項目を自動で埋めてくれる機能もある。</p>
<p><img src="/images/add_parts_a.png" alt="秋月購入履歴からの部品登録"></p>
<h3>部品検索</h3>
<p><img src="/images/search.png" alt="部品検索"></p>
<p>部品検索時は、検索したいワードをブラウザから入力する。</p>
<p>検索結果から部品詳細ページに飛ぶことができる。部品詳細ページを開くと、その部品が収まっている引き出しのLEDが点滅する。</p>
<h2>技術部分の詳細</h2>
<h3>必要部品</h3>
<ul>
<li>ATOM Lite ×1: <a href="https://www.switch-science.com/catalog/6262/">https://www.switch-science.com/catalog/6262/</a></li>
<li>PCA9685サーボシールド ×1: <a href="https://akizukidenshi.com/catalog/g/gK-10350/">https://akizukidenshi.com/catalog/g/gK-10350/</a></li>
<li>マイクロSDカードスロットDIP化キット ×1: <a href="https://akizukidenshi.com/catalog/g/gK-05488/">https://akizukidenshi.com/catalog/g/gK-05488/</a></li>
<li>ユニバーサル基板: <a href="https://akizukidenshi.com/catalog/g/gP-12171/">https://akizukidenshi.com/catalog/g/gP-12171/</a></li>
<li>3Dプリント部品</li>
</ul>
<h3>引き出しの構造</h3>
<p><img src="/images/Honeyview_IMG_2617.jpg" alt="引き出し外観1">
<img src="/images/Honeyview_IMG_2618.jpg" alt="引き出し外観2">
<img src="/images/Honeyview_IMG_2619.jpg" alt="引き出し外観3"></p>
<p>工具を用いずに凹凸ではめ込めるようにした。はめ込みの精度は使用する3Dプリンターに依存するので、プリンターに応じて調整を行う必要がある。</p>
<p>フィラメント量を節約するため、全体的にスリムにしている。強度は度外視している。このページ用に撮影している間にも破損したので、当日までに構造を修正するかもしれない。</p>
<h3>配線</h3>
<p>それぞれの部品の各配線は以下の通り。</p>
<p><img src="/images/wire.jpg" alt="配線図"></p>
<h3>電源</h3>
<p>ATOM LiteのUSB Type-C端子から供給する。</p>
<h3>LED制御</h3>
<p><a href="https://akizukidenshi.com/catalog/g/gK-10350/">PCA9685サーボシールド</a>を用いている。現状LEDは消灯or点滅のパターンしかないが、PCA9685のおかげでPWM出力ができるので、ON/OFFだけでなく明るさの調整もやろうと思えばできる。</p>
<p>今のところ同時にたくさんLEDをつける予定はないため、ATOM Liteの5Vピンから電源を供給している。</p>
<h3>DB</h3>
<p><a href="https://github.com/siara-cc/esp32_arduino_sqlite3_lib">Sqlite3 Arduino library for ESP32</a>を用いている。</p>
<p>データベースファイルはmicroSDカードに保存するようにしている。</p>
<h4>E-R図</h4>
<p><img src="/images/sshelf_er.png" alt="E-R図"></p>
<p>エンティティ名をShelfにしてしまっているが、役割としては"棚"というよりかは"引き出し"が正しい。</p>
<h3>Webサーバー</h3>
<p><a href="https://github.com/me-no-dev/ESPAsyncWebServer">ESPAsyncWebServer</a>を用いている。</p>
<h2>作った理由</h2>
<p>作った理由は、部品の在庫管理を行いたいと思ったため。今どれくらい部品が手持ちにあるか確認せずに、とりあえず必要な部品を(念のため)少し多めに購入する。ということを毎回繰り返していくと、余りの部品がどんどん生成されていく。これは健全ではないのではないかと思い、うまく管理したいなあと思った。</p>
<p>また、なんとなくのイメージとして、Googleみたいな検索エンジンから部品を検索して、現状の在庫から部品が見つかったらその部品の置いてある場所が光るみたいなものを作りたかった。今の自分の技術力で実現できそうなところを考えたところ、今回のような形になった。</p>
<h2>しばらく自分で使ってみての感想</h2>
<p>ひとまず手持ちの部品を登録してみて、実際に自分で使ってみた感想は以下。</p>
<ul>
<li>部品の登録・更新作業がひたすらにめんどくさい。
<ul>
<li>部品を入れる時、出す時にいちいちブラウザを開いて作業するのはやってられない。</li>
<li>せめてバーコード読み取りとかで登録・更新作業ができるようにしないとやってけない。</li>
</ul>
</li>
<li>ブラウザを開いて検索する前にとりあえず引き出しの中を見て確認してしまう。
<ul>
<li>どこに何があるかぼんやりと頭の中にあるので、それを頼りにとりあえず検索する前に引き出しの中を見てしまう。</li>
</ul>
</li>
<li>結局自分の頭の中にDBを作るのが一番強いと思う。
<ul>
<li>まあ無理なのだが。</li>
</ul>
</li>
</ul></div></div></div></article></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"fileData":{"id":"sshelf","matter":{"title":"SShelf"},"contentHtml":"\u003ch1\u003eSShelf\u003c/h1\u003e\n\u003cp\u003e名前は Searchable Shelf を省略して SShelf 。初見でかなり読みずらいと思うが\"エスシェルフ\"と読むことにする。\u003c/p\u003e\n\u003ch2\u003e外観\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"/images/Honeyview_IMG_2613.jpg\" alt=\"SShelf外観\"\u003e\u003c/p\u003e\n\u003ch2\u003e機能概要\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eどの部品をどこの引き出しに入れたかブラウザから手作業で登録できる。\u003c/li\u003e\n\u003cli\u003e部品の在庫をブラウザから検索できる。\u003c/li\u003e\n\u003cli\u003eブラウザから部品詳細ページを開くと、その部品が入っている引き出しのLEDが点滅する。\u003c/li\u003e\n\u003cli\u003e引き出しユニットを16個まで追加できる。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e機能の詳細\u003c/h2\u003e\n\u003ch3\u003e引き出し登録\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/images/add_shelf.png\" alt=\"引き出し登録\"\u003e\u003c/p\u003e\n\u003cp\u003e引き出し登録時は、以下をブラウザから入力する。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e引き出し名\u003c/li\u003e\n\u003cli\u003e接続ポート番号(接続するPCA9685のポート番号)\u003c/li\u003e\n\u003cli\u003eメモ\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e部品登録\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/images/add_parts_c.png\" alt=\"部品登録\"\u003e\u003c/p\u003e\n\u003cp\u003e部品登録時は、以下をブラウザから入力する。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e通販コード(任意)\u003c/li\u003e\n\u003cli\u003e部品名\u003c/li\u003e\n\u003cli\u003e個数\u003c/li\u003e\n\u003cli\u003e収納場所(登録した引き出しから選ぶ)\u003c/li\u003e\n\u003cli\u003eメモ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eなお、秋月電子の購入履歴をコピペすると、上記項目を自動で埋めてくれる機能もある。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/add_parts_a.png\" alt=\"秋月購入履歴からの部品登録\"\u003e\u003c/p\u003e\n\u003ch3\u003e部品検索\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/images/search.png\" alt=\"部品検索\"\u003e\u003c/p\u003e\n\u003cp\u003e部品検索時は、検索したいワードをブラウザから入力する。\u003c/p\u003e\n\u003cp\u003e検索結果から部品詳細ページに飛ぶことができる。部品詳細ページを開くと、その部品が収まっている引き出しのLEDが点滅する。\u003c/p\u003e\n\u003ch2\u003e技術部分の詳細\u003c/h2\u003e\n\u003ch3\u003e必要部品\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eATOM Lite ×1: \u003ca href=\"https://www.switch-science.com/catalog/6262/\"\u003ehttps://www.switch-science.com/catalog/6262/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ePCA9685サーボシールド ×1: \u003ca href=\"https://akizukidenshi.com/catalog/g/gK-10350/\"\u003ehttps://akizukidenshi.com/catalog/g/gK-10350/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eマイクロSDカードスロットDIP化キット ×1: \u003ca href=\"https://akizukidenshi.com/catalog/g/gK-05488/\"\u003ehttps://akizukidenshi.com/catalog/g/gK-05488/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eユニバーサル基板: \u003ca href=\"https://akizukidenshi.com/catalog/g/gP-12171/\"\u003ehttps://akizukidenshi.com/catalog/g/gP-12171/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e3Dプリント部品\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e引き出しの構造\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/images/Honeyview_IMG_2617.jpg\" alt=\"引き出し外観1\"\u003e\n\u003cimg src=\"/images/Honeyview_IMG_2618.jpg\" alt=\"引き出し外観2\"\u003e\n\u003cimg src=\"/images/Honeyview_IMG_2619.jpg\" alt=\"引き出し外観3\"\u003e\u003c/p\u003e\n\u003cp\u003e工具を用いずに凹凸ではめ込めるようにした。はめ込みの精度は使用する3Dプリンターに依存するので、プリンターに応じて調整を行う必要がある。\u003c/p\u003e\n\u003cp\u003eフィラメント量を節約するため、全体的にスリムにしている。強度は度外視している。このページ用に撮影している間にも破損したので、当日までに構造を修正するかもしれない。\u003c/p\u003e\n\u003ch3\u003e配線\u003c/h3\u003e\n\u003cp\u003eそれぞれの部品の各配線は以下の通り。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/wire.jpg\" alt=\"配線図\"\u003e\u003c/p\u003e\n\u003ch3\u003e電源\u003c/h3\u003e\n\u003cp\u003eATOM LiteのUSB Type-C端子から供給する。\u003c/p\u003e\n\u003ch3\u003eLED制御\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://akizukidenshi.com/catalog/g/gK-10350/\"\u003ePCA9685サーボシールド\u003c/a\u003eを用いている。現状LEDは消灯or点滅のパターンしかないが、PCA9685のおかげでPWM出力ができるので、ON/OFFだけでなく明るさの調整もやろうと思えばできる。\u003c/p\u003e\n\u003cp\u003e今のところ同時にたくさんLEDをつける予定はないため、ATOM Liteの5Vピンから電源を供給している。\u003c/p\u003e\n\u003ch3\u003eDB\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/siara-cc/esp32_arduino_sqlite3_lib\"\u003eSqlite3 Arduino library for ESP32\u003c/a\u003eを用いている。\u003c/p\u003e\n\u003cp\u003eデータベースファイルはmicroSDカードに保存するようにしている。\u003c/p\u003e\n\u003ch4\u003eE-R図\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"/images/sshelf_er.png\" alt=\"E-R図\"\u003e\u003c/p\u003e\n\u003cp\u003eエンティティ名をShelfにしてしまっているが、役割としては\"棚\"というよりかは\"引き出し\"が正しい。\u003c/p\u003e\n\u003ch3\u003eWebサーバー\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/me-no-dev/ESPAsyncWebServer\"\u003eESPAsyncWebServer\u003c/a\u003eを用いている。\u003c/p\u003e\n\u003ch2\u003e作った理由\u003c/h2\u003e\n\u003cp\u003e作った理由は、部品の在庫管理を行いたいと思ったため。今どれくらい部品が手持ちにあるか確認せずに、とりあえず必要な部品を(念のため)少し多めに購入する。ということを毎回繰り返していくと、余りの部品がどんどん生成されていく。これは健全ではないのではないかと思い、うまく管理したいなあと思った。\u003c/p\u003e\n\u003cp\u003eまた、なんとなくのイメージとして、Googleみたいな検索エンジンから部品を検索して、現状の在庫から部品が見つかったらその部品の置いてある場所が光るみたいなものを作りたかった。今の自分の技術力で実現できそうなところを考えたところ、今回のような形になった。\u003c/p\u003e\n\u003ch2\u003eしばらく自分で使ってみての感想\u003c/h2\u003e\n\u003cp\u003eひとまず手持ちの部品を登録してみて、実際に自分で使ってみた感想は以下。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e部品の登録・更新作業がひたすらにめんどくさい。\n\u003cul\u003e\n\u003cli\u003e部品を入れる時、出す時にいちいちブラウザを開いて作業するのはやってられない。\u003c/li\u003e\n\u003cli\u003eせめてバーコード読み取りとかで登録・更新作業ができるようにしないとやってけない。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eブラウザを開いて検索する前にとりあえず引き出しの中を見て確認してしまう。\n\u003cul\u003e\n\u003cli\u003eどこに何があるかぼんやりと頭の中にあるので、それを頼りにとりあえず検索する前に引き出しの中を見てしまう。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e結局自分の頭の中にDBを作るのが一番強いと思う。\n\u003cul\u003e\n\u003cli\u003eまあ無理なのだが。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e"},"view":0}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"sshelf"},"buildId":"1C703IJcvYnxWu0CGmYRD","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>